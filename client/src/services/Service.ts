import IService from "./IService";
import { IContactModel } from "../models/IContactModel";

export default class Service implements IService {

    contacts: Array<IContactModel> = [
        {
            contact_id: 1,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 2,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 3,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 4,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 5,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 6,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 7,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 8,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 9,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 10,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 11,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 12,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 13,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 14,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 15,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 16,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 17,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 18,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 19,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 20,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 21,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 22,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 23,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        },
        {
            contact_id: 24,
            name: "David",
            surname: "Aleu",
            image_url: "https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png",
            address: "C/Major nº3",
            telephone: "2331212312",
            email: "danefi@gege.com"
        }
    ];

    public getContacts(): Promise<Array<IContactModel>> {
        return new Promise<Array<IContactModel>>((resolve, reject)=>{
            let headers = new Headers();        

            fetch("https://agenda.hackfromhome.hackersatupc.org/api/contacts",{
                headers: headers,
                method: 'GET',
            })
            .then(response=>{
                response.json()
                .then(data=>{

                    let contacts = new Array<IContactModel>();
                    data.response.contact_list.forEach((contact:any) => {
                        let newContact: IContactModel = {
                            contact_id: contact.id,
                            image_url: contact.image_url,
                            name: contact.name,
                            surname: contact.last_name,
                            address: contact.address,
                            telephone: contact.phone_number,
                            email: contact.email
                        }
                        contacts.push(newContact);
                    });

                    resolve(contacts);
                });
            })
            .catch(error=>{
                reject(error);
            })
        });
    }

    public saveContact(contact: IContactModel): Promise<string> {
        return new Promise<string>((resolve, reject)=>{
            resolve("OK");
        });
    }

    public deleteContact(contact_id: number): Promise<string> {
        return new Promise<string>((resolve, reject)=>{
            resolve("OK");
        });
    }
}